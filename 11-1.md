---
title: Linux命令（运维）
date: 11/1/2022 9:10:45 AM 
categories: 日志
comments: "true"
tag: linux
---
# 用户常用命令

- ll /usr/sbin/user* 查看用户命令
- ll /usr/sbin/group* 查看组命令
- 查看用户信息 /etc/passwd
- 查看组信息 /etc/group
- 查看用户 id xxx名称
- userdel xxx ： 代表删除xx用户
- useradd xxx ： 代表添加xx用户
- usermod xxx ： 代表对一个用户进行操作

## 切换用户

- su xxx
- su -xxx
- 切换用户 ，如果用下面的那种，会获得该用户的环境变量并且执行
- 用上面的那种目录不会跑到所切换的用户的home
- 而下面的会跑到切换用户的home
- 用exit退回
- 如果删除了一个已经存在的user ， 再次添加相同名称的用户的时候，会有警告，说明此用户的目录已经存在
- 在skel文件夹下有隐藏文件
- 如果把这个里的东西删掉，就会出现环境变量丢失的情况
- 我们可以从别的地方的给他cp过来
- 就会恢复了

# 组常见命令

- groupadd xxx
- 把一个用户添加到一个组上
- usermod -a -G xxx组 xxx用户
- usermod -g ： 更改用户主组 ，但是这样会让追加组丢失

# 设置用户密码

- passwd
- 默认修改当前用户的密码

## 修改其他用户的密码

- 只有root有权限修改其他的密码
- passwd xxx名字

### sudo

- 是一个普通用户临时具有最大权限
- 修改 etc/sudoers
- xxx用户 ALL=(root) NOPASSWD:ALL
- 然后就可以用 sudo xxx 命令这就代表这条指令具有了最高的权限
- su 和 sudo 联用
- sudo su xx人员
- 代表通过root权限切换

### etc/paswd

- 这个文件是密码文件
- 在这个文件里 有解释器 如果后面变成nologin代表不让登录
- 如果最后变成false 则你无论如何都登陆不成功
- CDH平台 可能会用到
- 把上面两中改成 bin/bash 就可以成功了

# 权限相关命令

- 第一个字母
- d :文件夹
- -(横杠) ： 文件
- l ： 链接
- 后面9个字母 ，每三个一组
- r表示read  代表数字 4
- w表示write 代表数字 2
- x表示执行权限 代表数字 1
- -表示无权限 代表数字 0
- 例子 ：-rw-r- -r- -. 1 root root 2047 10月 31 09:48 initial-setup-ks.cfg
- 第一组 ： rw- 4+2+0=6 代表文件或者文件夹的所属用户拥有的权限
- 第二组 ： r- - 4+0+0=4 代表文件或者文件夹的组的成员的权限
- 第三组 ： r- - 4+0+0=4 代表文件或者文件夹的其他组的权限
- 字母顺序只能按照rwxr这个顺序

## 权限修改命令

- chmod 修改文件或者文件夹权限
- chown 修改文件或者文件夹的组 ， 或者用户
- 例子 ： chmod xxx（数字）xxx名字
- 如果要该文件夹 则要 chmod -R xxx数字 xxx名字
- 例子 ： chown xxx用户：xxx用户 文件名
- 同样也可以用-R ，来修改文件夹

### 场景

- 如果要访问问文件夹里的文件，要先看上面的文件夹的权限是啥样的

## 大小

- ll -h ，du -sh
- 而对于文件夹 du -sh也可以查看 ，ll -h 就不行
- du -sh ： 最小是4k ， 但是他无法查看权限

## 搜索文件

- find
- locate（没有网，不建议用）
- 例子 ： find 【path】 【表达式】
- 表达式 ： -name "xxx" : 按照名字查找
- 比如 ： find / -name "1.log"

## vi/vim

- 编辑文件
- 尾行模式 ： wq 退出保存
- 如果编辑文件的时候突然不小心把编辑的时候中断了，就是ctrl + c 或者 ctrl + z
- 解决方法 ： 删除Swap文件是隐藏文件 ，.开头的
- 行号 ： 首先进入尾行模式
- set nu 就会有行号
- set nonu就可以取消行号

## 常用快捷方式

- dd ： 删除当前行
- dG ： 删除当前行 以及以下所有行
- ndd ： 删除这个行 以及下面n行
- u ：　撤回
- ｇｇ　：　跳转到第一行的第一个字母
- Ｇ　：　跳转到最后一行的第一个字母
- ｓｈｉｆｔ　＋ $  ： 就是跳转到行尾
- ｓｈｉｆｔ　＋ ^  : 跳转到行头
- i ： 是当前行编辑
- o ： 是跳转到下一行编辑

### 清空文件内容

- gg -> dG
- linux 有一个空的文件
- 然后 cat /dev/null  > xxx文件名字

## 系统相关命令

- 内存 ： free
- 磁盘 ： df
- 可能会添加磁盘
- 可通过这个来判断
- 后来挂载的一般是vdb的
- 负载 ： top
- load average ： xxx xxx xxx
- 第一个是5分钟之内的负载
- 第二个是10分钟
- 第三个是15分钟
- 如果任意一个超过十 ，说明当前公司的服务器 比较卡
- pid是进程号
- user是那个用户
- 重启的目的 ：
- 检查是不是硬件有无问题

## yum/rpm

- 安装linux软件的方式 联网
- yum search xxx
- 下载下来的一个安装包以rpm存储
- yum install xxx

## 通讯命令

- ping + ip
- telnet ip 端口 :检查对面的端口是不是开放
- 端口 ： 1-65535
- 两个机器要在一个网段
- ping通就代表是网络ok

## 补充命令

- which + 命令
- whereis + 命令
- 查看linux或者某个软件的shell脚本是不是存在
- which ： 是查看自己环境变量的命令存在吗
- whereis ： 是查看全局变量的名利给的存在吗

## 修改机器名字

- hostnamectl ： xxxx

## 解压缩命令

- linux 对zip和gz可以解压
- zip xxx.zip （-r） xxx文件（这里压缩可以多个）如果是文件夹则要加上-r
- 代表压缩到xxx.zip里
- 解压
- unzip xxx.zip （-d xxx文件夹）
- tar ：
- 例子 ： tar -cf xxx.tar xxx文件（可以多个）
- 解压：
- 例子 ： tar -xf xxx.tar -C xxx文件夹
- 可以不加-C就是默认解压当前文件目录
- 压缩：
- 用z命令
- tar -zcf xxx.tar xxx文件（可以多个）
- 解压：
- tar -zxf xxx.tar -C xxx文件夹
- 我们可以再加上v让他们显示详细得处理文件的过程
- zxvf：同上
- zxcf：同上

## yum

- 当用yum安装成功之后 ，可以直接用系统命令启动
- 比如 ： service name start|status|restart|stop  : centos6
- syystemctl start|status|restart|stop name : centos7
- 查看进程
- ps -ef
- 可以进行筛选
- ps -ef|grep xxx名字
- 杀死进程
- kill -9 + 进程号
- 查端口：
- netstat -nlp | grep xxxname
- 通过
- :::80
- ip:80
- 0.0.0.0:80
- 我们可以通过外部机器访问这个端口进入服务界面
- kill -9 $(pgrep -f xxx名字)
- 下面的会强制把他们全杀掉 ， 包括子进程
-
