---
title: 踩过的坑
date: 11/17/2022 7:47:34 PM   
categories: 日志
comments: "true"
---
# 修改windows下的hosts文件不生效

- 这个坑一直卡了我三四天
- 配置完hadoop集群，进行web访问的时候出现了这个问题
- 因为windows的主机映射不好使，所以我无法在网页端查看数据

## 解决办法

- 我这里解决这个的办法是通过
- 把中间空格放大的方法
- 就是一个小空格加一个tab键
- 然后进入 `edge://net-internals`或者 `chrome://net-internals`
- 这取决于你的浏览器
- 然后 `win + x` 查看windows powershell（管理员）打开之后执行 ` ipconfig /flushdns`
- 刷新之后就可以通过映射访问了

# 有关于idea关于Hadoop的api的copyToLocalfile不生效

- 报错信息 `java.io.FileNotFoundException: HADOOP_HOME and hadoop.home.dir are unset.`
- 这个是代表你windows里没有配置hadoop环境
- 我们可以不用他提供的api
- 通过

```

        FSDataInputStream fis = fs.open(new Path("/date")); // hdfs上的文件
        OutputStream outputStream = new FileOutputStream( new File("D:\\ bg1.txt") , false); // 本地的存储地点
        IOUtils.copyBytes(fis,outputStream,4096 , true);

```

- 就可以实现下载

# 关于linux里的mysql会自动识别大小写表名的事情

linux里的mysql会自动对表名进行大小写区分，这可能导致一些boot项目启动的时候找不到表名

如何更改如下

首先查看自己的表名大小写权限是不是打开了

先在mysql里执行

`show variables like "%case%";`

查看一下我们的权限打没打开

一般默认的时候会有个off的选项

这个是默认的情况

接下来我们对其进行修改

我们首先退出mysql

然后关闭mysql服务输入 ： `mysqladmin -uroot -p shutdown //以安全模式关闭数据库`

接下来输入密码就关闭了

然后编辑mysql的配置文件

输入 ： `vim /etc/my.cnf`

在mysqld下添加一行

`lower_case_table_names=1`

然后退出保存即可

最后要重新启动mysql输入 ： `systemctl resatrt mysqld`

就可以了

# mysql误删了配置文件 performance_schema的恢复

首先我们退出mysql

然后输入 `mysql_upgrade -u root -p `

输入我们的密码之后

然后重新登录我们的mysql就会出现了

# npm怎么清除缓存

首先关于npm进行清除缓存

先明确自己的npm的版本

如果npm version < 7.0.0

`$ npm cache clean -f`

npm version ≧ 7.0.0 会报以下错误

```bash
$ npm cache cleannpm ERR! As of npm@5, the npm cache self-heals from corruption issues
npm ERR! by treating integrity mismatches as cache misses.  As a result,
npm ERR! data extracted from the cache is guaranteed to be valid.  If you
npm ERR! want to make sure everything is consistent, use npm cache verify
npm ERR! instead.  Deleting the cache can only make npm go slower, and is
npm ERR! not likely to correct any problems you may be encountering!
npm ERR!
npm ERR! On the other hand, if you're debugging an issue with the installer,
npm ERR! or race conditions that depend on the timing of writing to an empty
npm ERR! cache, you can use npm install --cache /tmp/empty-cache to use a
npm ERR! temporary cache instead of nuking the actual one.
npm ERR!
npm ERR! If you're sure you want to delete the entire cache, rerun this command
npm ERR! with --force.npm ERR! A complete log of this run can be found in:
npm ERR!     /Users/xxxxxx/.npm/_logs/2021-02-04T06_35_38_043Z-debug.log
```

如果想强制清除缓存就要用--force

# 关于npm设置镜像源

`npm config set registry http://registry.npm.taobao.org`

然后就把淘宝镜像源加进入了

# Git之本地分支和远程分支建立追踪关系的几种方式

```bash
git branch --set-upstream-to=origin/remote_branch your_branch
origin/remote_branch是你本地分支对应的远程分支；your_branch是你当前的本地分支。
```

或者之间checkout -b 根据远程建立本地分支

# git 删除远程分支

` git push origin --delete [branch_name]`

# 云服务器内存不够，设置swap交换分区

闲来无事自己用云主机搭建了一台gitlab，但是由于云主机是2G2核的在刚开始布置完成之后，访问的时候时常会502

就是服务器的内存被占据太多了，无法响应导致的

然后就想办法设置交换分区解决这个问题

首先要在root 用户下

然后是创建交换分区的文件 `/file/swap`

然后执行 `dd if=/dev/zero of=/file/swap bs=1024 count=4096000`

```
/dev/zero是输入，/file/swap是交换文件位置，路径得存在，bs读/写的块大小，count是swap大小
```

然后执行 `mkswap /file/swap`

把第一步的文件设置成swap交换区

启用swap交换分区

`swapon /file/swap`

设置成开机挂载交换区

`echo "/file/swap swap swap defaults 0 0" >> /etc/fstab`

设置启动的条件

`vim /etc/sysctl.conf 将vm.swappiness = 0值改为50`

```
这个值是如何使用swap分区值越大越积极使用swap分区，越小表示越积极使用物理内存，wappiness=50，表示内存使用率超过100-50=50%时开始使用交换分区，swappiness=0时不使用swapswappiness＝100的时候表示积极使用swap分区，并把内存上的数据及时搬运到swap空间
```

加载参数

`sysctl -p`
